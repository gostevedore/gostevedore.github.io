<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Stevedore – Builder</title><link>https://gostevedore.github.io/docs/docs-v0.10/reference-guide/builder/</link><description>Recent content in Builder on Stevedore</description><generator>Hugo -- gohugo.io</generator><atom:link href="https://gostevedore.github.io/docs/docs-v0.10/reference-guide/builder/index.xml" rel="self" type="application/rss+xml"/><item><title>Docs: Ansible playbook driver options</title><link>https://gostevedore.github.io/docs/docs-v0.10/reference-guide/builder/ansible-playbook/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://gostevedore.github.io/docs/docs-v0.10/reference-guide/builder/ansible-playbook/</guid><description>
&lt;h2 id="keywords-reference-for-ansible-playbook-driver">Keywords reference for Ansible Playbook driver&lt;/h2>
&lt;p>The following table describes the attributes that can be configured on the Ansible playbook driver.&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Keyword&lt;/th>
&lt;th style="text-align:center">Type&lt;/th>
&lt;th>Description&lt;/th>
&lt;th>Value&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;strong>playbook&lt;/strong>&lt;/td>
&lt;td style="text-align:center">&lt;em>string&lt;/em>&lt;/td>
&lt;td>It is the playbook file location path&lt;br>&lt;font color="#AA0088">&lt;em>mandatory&lt;/em>&lt;/font>&lt;/td>
&lt;td>-&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>inventory&lt;/strong>&lt;/td>
&lt;td style="text-align:center">&lt;em>string&lt;/em>&lt;/td>
&lt;td>It is the ansible-playbook inventory&lt;br>&lt;font color="#AA0088">&lt;em>mandatory&lt;/em>&lt;/font>&lt;/td>
&lt;td>It can be either an inventory file or and adhoc inventory, such &lt;code>127.0.0.1,&lt;/code>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="variables-mapping-reference">Variables-mapping reference&lt;/h2>
&lt;p>&lt;code>ansible-playbook&lt;/code> driver provides to ansible-playbook the variables-mapping entries as &lt;a href="https://docs.ansible.com/ansible/latest/user_guide/playbooks_variables">extra-vars&lt;/a>.&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Key name&lt;/th>
&lt;th>Description&lt;/th>
&lt;th>Default&lt;br>argument-name&lt;/th>
&lt;th>Default&lt;br>argument-value&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;strong>image_builder_label_key&lt;/strong>&lt;/td>
&lt;td>This is the argument-name to set the name of the intermediate container that is used to create the Docker image using the ansible-playbook driver&lt;/td>
&lt;td>image_builder_label&lt;/td>
&lt;td>The argument-value is set as the full qualified name of the image&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>image_from_name_key&lt;/strong>&lt;/td>
&lt;td>This is the argument-name to set the name of the parent image from which the new image will be built using the ansible-playbook driver&lt;/td>
&lt;td>image_from_name&lt;/td>
&lt;td>The argument-value is set as the parent image&amp;rsquo;s name within the &lt;a href="https://gostevedore.github.io/docs/docs-v0.10/getting-started/concepts/#images-tree">images-tree&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>image_from_registry_host_key&lt;/strong>&lt;/td>
&lt;td>This is the argument-name to set the parent image&amp;rsquo;s registry host when creating a Docker image using the ansible-playbook driver&lt;/td>
&lt;td>image_from_registry_host&lt;/td>
&lt;td>The argument-value is set as the parent image&amp;rsquo;s registry host within the &lt;a href="https://gostevedore.github.io/docs/docs-v0.10/getting-started/concepts/#images-tree">images-tree&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>image_from_registry_namespace_key&lt;/strong>&lt;/td>
&lt;td>This is the argument-name to set the parent image&amp;rsquo;s namespace within the registry when creating a Docker image using the ansible-playbook driver&lt;/td>
&lt;td>image_from_registry_namespace&lt;/td>
&lt;td>The argument-value is set as the parent image&amp;rsquo;s namespace within the &lt;a href="https://gostevedore.github.io/docs/docs-v0.10/getting-started/concepts/#images-tree">images-tree&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>image_from_tag_key&lt;/strong>&lt;/td>
&lt;td>This is the argument-name to set the parent image&amp;rsquo;s tag when creating a Docker image using the ansible-playbook driver.&lt;/td>
&lt;td>image_from_tag&lt;/td>
&lt;td>The argument-value is set as the parent image&amp;rsquo;s version within the &lt;a href="https://gostevedore.github.io/docs/docs-v0.10/getting-started/concepts/#images-tree">images-tree&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>image_name_key&lt;/strong>&lt;/td>
&lt;td>This is the argument-name to set the name of the new Docker image that will be built using the ansible-playbook driver&lt;/td>
&lt;td>image_name&lt;/td>
&lt;td>If not specified, the argument-value for the image name will be derived from the name of the image within the &lt;a href="https://gostevedore.github.io/docs/docs-v0.10/getting-started/concepts/#images-tree">images-tree&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>image_tag_key&lt;/strong>&lt;/td>
&lt;td>This is the argument-name to set the tag for the new Docker image that will be built using the ansible-playbook driver&lt;/td>
&lt;td>image_tag&lt;/td>
&lt;td>If not specified, the argument-value for the default tag will be the version of the image within the &lt;a href="https://gostevedore.github.io/docs/docs-v0.10/getting-started/concepts/#images-tree">images-tree&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>image_registry_namespace_key&lt;/strong>&lt;/td>
&lt;td>This is the argument-name that you can use to set the namespace or organization of the registry where the image will be pushed. It allows you to specify the namespace separately from the image name when pushing the image to a registry&lt;/td>
&lt;td>image_registry_namespace&lt;/td>
&lt;td>There is no default argument-value. If it is not specified, the image will be pushed to the root namespace of the specified registry&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>image_registry_host_key&lt;/strong>&lt;/td>
&lt;td>This is the argument-name that you can use to set the Docker registry host when creating a Docker image&lt;/td>
&lt;td>image_registry_host&lt;/td>
&lt;td>Stevedore leaves the argument-value empty, which means that the Docker Hub registry host is used&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>image_extra_tags_key&lt;/strong>&lt;/td>
&lt;td>This is the argument-name that you can use to specify additional tags to be applied to the Docker image when it is built using the ansible-playbook driver. You can specify multiple tags providing a &lt;a href="https://json-schema.org/understanding-json-schema/reference/array.html">JSON array&lt;/a>&lt;/td>
&lt;td>image_extra_tags_key&lt;/td>
&lt;td>-&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>push_image_key&lt;/strong>&lt;/td>
&lt;td>Use this argument-name to specify a variable that controls whether the Docker image should be automatically pushed after it&amp;rsquo;s built&lt;/td>
&lt;td>push_image&lt;/td>
&lt;td>The argument-value is set as &lt;em>false&lt;/em>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table></description></item><item><title>Docs: Docker driver options</title><link>https://gostevedore.github.io/docs/docs-v0.10/reference-guide/builder/docker/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://gostevedore.github.io/docs/docs-v0.10/reference-guide/builder/docker/</guid><description>
&lt;p>The following table describes the attributes that can be configured on the Docker driver.&lt;/p>
&lt;h2 id="keywords-reference-for-docker-driver">Keywords reference for Docker driver&lt;/h2>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Keyword&lt;/th>
&lt;th style="text-align:center">Type&lt;/th>
&lt;th>Description&lt;/th>
&lt;th>Value&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;strong>context&lt;/strong>&lt;/td>
&lt;td style="text-align:center">map&lt;/td>
&lt;td>It is the Docker build context. There you find the set of files required to build a Docker image. The context cam be located either on a local path, known as &lt;code>path&lt;/code> context, or in a git respository, named &lt;code>git&lt;/code> context.&lt;br>&lt;font color="#AA0088">&lt;em>mandatory&lt;/em>&lt;/font>&lt;/td>
&lt;td>Each context type has its own specifications.&lt;br> Refer to the &lt;a href="https://gostevedore.github.io/docs/docs-v0.10/reference-guide/builder/#docker-build-contexts">Docker build contexts&lt;/a> section for a detailed description of how to configure each context&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>dockerfile&lt;/strong>&lt;/td>
&lt;td style="text-align:center">&lt;em>string&lt;/em>&lt;/td>
&lt;td>&lt;code>Dockerfiles&lt;/code>&amp;rsquo;s location path. The path is relative to context root&lt;br>&lt;font color="#AA0088">&lt;em>optional&lt;/em>&lt;/font>&lt;/td>
&lt;td>By default, is used the &lt;code>Dockerfile&lt;/code> located at context root&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="docker-build-contexts">Docker build contexts&lt;/h3>
&lt;p>Stevedore supports two kinds of Docker build context. The &lt;strong>path&lt;/strong> context, which uses a local folder to create the Docker build context, and the &lt;strong>git&lt;/strong> context, which creates the Docker build context from a git repository.&lt;/p>
&lt;h4 id="path-context">Path context&lt;/h4>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Keyword&lt;/th>
&lt;th style="text-align:center">Type&lt;/th>
&lt;th>Description&lt;/th>
&lt;th>Value&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;strong>path&lt;/strong>&lt;/td>
&lt;td style="text-align:center">string&lt;/td>
&lt;td>It specifies where to find the files required to build the image&lt;br>&lt;font color="#AA0088">&lt;em>mandatory&lt;/em>&lt;/font>&lt;/td>
&lt;td>-&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h4 id="git-context">Git context&lt;/h4>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Keyword&lt;/th>
&lt;th style="text-align:center">Type&lt;/th>
&lt;th>Description&lt;/th>
&lt;th>Value&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;strong>git&lt;/strong>&lt;/td>
&lt;td style="text-align:center">map&lt;/td>
&lt;td>It is the keyword under which are defined the git repository details&lt;br>&lt;font color="#AA0088">&lt;em>mandatory&lt;/em>&lt;/font>&lt;/td>
&lt;td>-&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>repository&lt;/strong>&lt;/td>
&lt;td style="text-align:center">string&lt;/td>
&lt;td>Repository specifies the git repository to find the files to build the image. &lt;code>repository&lt;/code> keyword is placed under &lt;code>git&lt;/code>.&lt;br>&lt;font color="#AA0088">&lt;em>mandatory&lt;/em>&lt;/font>&lt;/td>
&lt;td>-&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>reference&lt;/strong>&lt;/td>
&lt;td style="text-align:center">string&lt;/td>
&lt;td>Repository reference required to build the image. &lt;code>reference&lt;/code> keyword is placed under &lt;code>git&lt;/code>.&lt;br>&lt;font color="#AA0088">&lt;em>optional&lt;/em>&lt;/font>&lt;/td>
&lt;td>By default, is used &lt;a href="https://pkg.go.dev/github.com/go-git/go-git/v5@v5.0.0/plumbing#ReferenceName">&lt;code>refs/heads/master&lt;/code>&lt;/a> reference, that belongs to &lt;a href="https://github.com/go-git/go-git">go-git&lt;/a> project.&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="variables-mapping-reference">Variables-mapping reference&lt;/h2>
&lt;p>Docker driver passes &lt;code>variables mapping&lt;/code> to Docker API as build arguments and each variable can be consumed as an &lt;a href="https://docs.docker.com/engine/reference/builder/#arg">ARG&lt;/a> inside the Dockerfile definition.&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Key name&lt;/th>
&lt;th>Description&lt;/th>
&lt;th>Default&lt;br>argument-name&lt;/th>
&lt;th>Default&lt;br>argument-value&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;strong>image_from_name_key&lt;/strong>&lt;/td>
&lt;td>This is the argument-name that you can use to set the name of the base image that you want to use as a starting point for your Docker image&lt;/td>
&lt;td>image_from_name&lt;/td>
&lt;td>The argument-value is set as the parent image’s name within the &lt;a href="https://gostevedore.github.io/docs/docs-v0.10/getting-started/concepts/#images-tree">images-tree&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>image_from_registry_host_key&lt;/strong>&lt;/td>
&lt;td>This is the argument-name that you can use to set the Docker registry host where the base image is located&lt;/td>
&lt;td>image_from_registry_host&lt;/td>
&lt;td>The argument-value is set as the parent image’s registry host within the &lt;a href="https://gostevedore.github.io/docs/docs-v0.10/getting-started/concepts/#images-tree">images-tree&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>image_from_registry_namespace_key&lt;/strong>&lt;/td>
&lt;td>This is the argument-name that you can use to set the namespace of the Docker registry where the base image is located&lt;/td>
&lt;td>image_from_registry_namespace&lt;/td>
&lt;td>The argument-value is set as the parent image’s namespace within the &lt;a href="https://gostevedore.github.io/docs/docs-v0.10/getting-started/concepts/#images-tree">images-tree&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>image_from_tag_key&lt;/strong>&lt;/td>
&lt;td>This is the argument-name that you can use to set the tag of the base image that you want to use as a starting point for your Docker image&lt;/td>
&lt;td>image_from_tag&lt;/td>
&lt;td>The argument-value is set as the parent image’s version within the &lt;a href="https://gostevedore.github.io/docs/docs-v0.10/getting-started/concepts/#images-tree">images-tree&lt;/a>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>The example below defines a Dockerfile that can use the arguments passed by the docker driver to build a Docker image.
&lt;div class="highlight">&lt;div style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
&lt;/span>&lt;span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
&lt;/span>&lt;span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
&lt;/span>&lt;span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
&lt;/span>&lt;span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-dockerfile" data-lang="dockerfile">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">ARG&lt;/span> image_from_registry_host&lt;span style="color:#a40000">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a40000">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">ARG&lt;/span> image_from_registry_namespace&lt;span style="color:#a40000">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a40000">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">ARG&lt;/span> image_from_name&lt;span style="color:#a40000">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a40000">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">ARG&lt;/span> image_from_tag&lt;span style="color:#a40000">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a40000">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">FROM&lt;/span>&lt;span style="color:#4e9a06"> ${image_from_registry_host}/${image_from_registry_namespace}/${image_from_name}:${image_from_tag}&lt;/span>&lt;span style="color:#a40000">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a40000">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">RUN&lt;/span> &amp;lt;set-your-action&amp;gt;&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/p></description></item></channel></rss>