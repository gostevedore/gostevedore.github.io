<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Stevedore â€“ Driver</title><link>https://gostevedore.github.io/docs/docs-v0.11/reference-guide/driver/</link><description>Recent content in Driver on Stevedore</description><generator>Hugo -- gohugo.io</generator><atom:link href="https://gostevedore.github.io/docs/docs-v0.11/reference-guide/driver/index.xml" rel="self" type="application/rss+xml"/><item><title>Docs: Ansible playbook</title><link>https://gostevedore.github.io/docs/docs-v0.11/reference-guide/driver/ansible-playbook/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://gostevedore.github.io/docs/docs-v0.11/reference-guide/driver/ansible-playbook/</guid><description>
&lt;p>To create a Docker image using the ansible-playbook driver you need an Ansible playbook to carry out that task.
Since Stevedore executes the ansible-playbook command, you must install the Ansible tool set before building an image.&lt;/p>
&lt;p>The driver prepares the parameters on the builder&amp;rsquo;s &lt;a href="https://gostevedore.github.io/docs/docs-v0.11/getting-started/concepts/#variables-mapping">variables-mapping&lt;/a>, the image &lt;a href="https://gostevedore.github.io/docs/docs-v0.11/reference-guide/image/#keywords-reference-for-image-configuration">vars&lt;/a> and the image &lt;a href="https://gostevedore.github.io/docs/docs-v0.11/reference-guide/image/#keywords-reference-for-image-configuration">persistent_vars&lt;/a> and passed them as Ansible &lt;em>extra-vars&lt;/em>. It then utilizes the &lt;a href="https://github.com/apenella/go-ansible">go-ansible&lt;/a> library to execute the corresponding ansible-playbook commands.&lt;/p>
&lt;h2 id="driver-configuration">Driver configuration&lt;/h2>
&lt;p>The configuration of the driver is done through the builder. There you can set the path of the &lt;em>playbook&lt;/em> and &lt;em>inventory&lt;/em> as well as the variables-mapping.&lt;/p>
&lt;p>Refer to the ansible-playbook &lt;a href="https://gostevedore.github.io/docs/docs-v0.11/reference-guide/builder/ansible-playbook/#keywords-reference-for-ansible-playbook-driver">reference&lt;/a> to know more about how to set the options for the ansible-playbook driver.&lt;/p>
&lt;h2 id="recipe-to-write-the-ansible-playbook">Recipe to write the Ansible playbook&lt;/h2>
&lt;p>To write an Ansible playbook that builds a Docker image, you will need to use the &lt;a href="https://galaxy.ansible.com/community/docker">docker collection&lt;/a>. This collection provides a set of modules that allow you to interact with the Docker API.&lt;/p>
&lt;p>Your playbook should include the following steps:&lt;/p>
&lt;p>The Ansible playbook you want to use to create a Docker image must include the following action defined there:&lt;/p>
&lt;ol>
&lt;li>Start a Docker container that will be used as the base for the image you want to create. You can use the docker_container module to start the container, specifying the image you want to use as the base.&lt;/li>
&lt;li>Provision and configure the base container to include any required packages, libraries, or other dependencies. You can use the standard Ansible modules to perform these tasks.&lt;/li>
&lt;li>Once the container is fully provisioned and configured, you can use the docker_commit module to create a new Docker image based on the modified container.&lt;/li>
&lt;/ol>
&lt;p>By following these steps, you can create a Docker image using an Ansible playbook.&lt;/p></description></item><item><title>Docs: Docker</title><link>https://gostevedore.github.io/docs/docs-v0.11/reference-guide/driver/docker/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://gostevedore.github.io/docs/docs-v0.11/reference-guide/driver/docker/</guid><description>
&lt;p>The Docker driver is a Stevedore tool that enables building Docker images using the &lt;a href="(https://pkg.go.dev/github.com/docker/docker/client?utm_source=godoc#section-documentation)">Docker Engine API&lt;/a>. To accomplish this, Stevedore uses the &lt;a href="https://github.com/apenella/go-docker-builder">go-docker-builder&lt;/a> library, which provides a set of abstractions on top of the Docker API, allowing Stevedore to prepare the Docker build context and set the build arguments required to build the Docker image. This data is then sent to the Docker Engine API via the &lt;a href="https://github.com/apenella/go-docker-builder">go-docker-builder&lt;/a> library, which creates the Docker image based on the provided parameters.&lt;/p>
&lt;h2 id="driver-configuration">Driver configuration&lt;/h2>
&lt;p>The configuration of the driver is done through the builder. There you can set the path of the Docker&amp;rsquo;s build context and the Dockerfile.&lt;/p>
&lt;p>Refer to the Docker &lt;a href="https://gostevedore.github.io/docs/docs-v0.11/reference-guide/builder/docker/#keywords-reference-for-docker-driver">reference&lt;/a> to know more about how to set the options for the Docker driver.&lt;/p></description></item></channel></rss>