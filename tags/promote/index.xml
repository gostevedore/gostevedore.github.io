<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Stevedore – promote</title><link>https://gostevedore.github.io/tags/promote/</link><description>Recent content in promote on Stevedore</description><generator>Hugo -- gohugo.io</generator><lastBuildDate>Thu, 05 Jan 2017 00:00:00 +0000</lastBuildDate><atom:link href="https://gostevedore.github.io/tags/promote/index.xml" rel="self" type="application/rss+xml"/><item><title>Docs: Quickstart</title><link>https://gostevedore.github.io/docs/docs-v0.11/getting-started/quickstart/</link><pubDate>Thu, 05 Jan 2017 00:00:00 +0000</pubDate><guid>https://gostevedore.github.io/docs/docs-v0.11/getting-started/quickstart/</guid><description>
&lt;h2 id="installation">Installation&lt;/h2>
&lt;p>To install Stevedore, use the script provided on the repository:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>curl -fsSL https://raw.githubusercontent.com/gostevedore/stevedore/main/scripts/install.sh &lt;span style="color:#000;font-weight:bold">|&lt;/span> sudo bash -
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Alternatively, you can visit the &lt;a href="https://gostevedore.github.io/docs/getting-started/install/">installation guide&lt;/a> for other methods.&lt;/p>
&lt;h2 id="initial-setup">Initial setup&lt;/h2>
&lt;ul>
&lt;li>Create a folder structure to store image definitions and builder configurations before building Docker images.&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>/ $ mkdir -p /docker/images /docker/builders
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Initialize Stevedore.&lt;/li>
&lt;/ul>
&lt;p>We create a configuration file for this guide, but it can be also defined on environment variables.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>/ $ &lt;span style="color:#204a87">cd&lt;/span> /docker
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>/docker $ stevedore initialize --builders-path builders --credentials-storage-type &lt;span style="color:#204a87">local&lt;/span> --generate-credentials-encryption-key --images-path images --log-path-file /dev/null
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>After running this command, you can validate the configuration by using the &lt;em>get configuration&lt;/em> subcommand.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>/docker $ stevedore get configuration
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> builders_path: builders
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> concurrency: &lt;span style="color:#0000cf;font-weight:bold">4&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> semantic_version_tags_enabled: &lt;span style="color:#204a87">false&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> images_path: images
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> log_path: /dev/null
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> push_images: &lt;span style="color:#204a87">false&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> semantic_version_tags_templates:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ce5c00;font-weight:bold">{{&lt;/span> .Major &lt;span style="color:#ce5c00;font-weight:bold">}}&lt;/span>.&lt;span style="color:#ce5c00;font-weight:bold">{{&lt;/span> .Minor &lt;span style="color:#ce5c00;font-weight:bold">}}&lt;/span>.&lt;span style="color:#ce5c00;font-weight:bold">{{&lt;/span> .Patch &lt;span style="color:#ce5c00;font-weight:bold">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> credentials:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> storage_type: &lt;span style="color:#204a87">local&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> format: json
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> encryption_key: 1c591ac2d9c2664db265704052c17a67
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Create credentials to log into the Docker registry.&lt;/li>
&lt;/ul>
&lt;p>Since you create a credential using a username and password, Stevedore prompts you to enter a password for the specified username.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>/docker $ stevedore create credentials registry.stevedore.test --username admin
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Password:
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Validate that the credentials have been stored.&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>/docker $ stevedore get credentials
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ID TYPE CREDENTIALS
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test username-password &lt;span style="color:#000">username&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>admin
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Stevedore&amp;rsquo;s configuration encrypts the credentials content at rest by providing an encryption key.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>/docker $ cat credentials/82e99d42ee1191bb42fbfb444920104d
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>2d067af765e8de39fd76b5cd1a430768a66464208bf8fe0c092bcb146a24feed377b916952494e6cea55187f397aee8c2d90a55ef9882cf85ee97ed5660700afa002767e028b4ea6bde274a524e7100f5729601f2d44caa08a1a102af7f79079723f35953133be56e31d0eaf44f52255a5c94512c74625dca3f00b77f9031d4f48f5cf38293f7a2a90f727c9a5eedf57e001ea8766a6d1e47d20354ad3ca6cf022ee70b97b3598e7377355a7b52f62fab8b6628b230c33cf0234ea1208c0d6ecef65e8e1206e7daf15acbbfb62d77650982c9f487129534b367a7fc2b519fd04538bffe87e57184adabc57e613be4b0e106480f9078c8c1c916b65de0039a3adc6cea70b962c0d93477e114e25a2a160db0218e9312d0df00d9b1044e0b4981982834094a36d8d9e4fd9ed766605c1a0b43ff11219d6e5bebb414e084102ce8cd57e86a658455de5fff927ba9be039be4afd393b7e8137cdefb268ed7c79ff37a60c1be3693372d7890b9f8f7c81fa559719ff83371e080efaee86b239e127a094136d056641a4a58245f71414b53dd96214149c6f54de055064163fa9dcb0a6b274d9269a49e1e4f76a9c0a89ec12d40c577ea1b5c1b3f9f8454f5473518c58e8c139a96335850a6415df7e2d41f5ab383f85d30281fd29493db0f0fb577aba35326cd5063b463a41161888514dbce09ccea5887494733256d74341e2623a5328c656/docker &lt;span style="color:#8f5902;font-style:italic">#&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="build-the-docker-images-for-an-application">Build the Docker images for an application&lt;/h2>
&lt;p>In this section, we create an application that has multiple versions and needs to be built from multiple parents.&lt;/p>
&lt;ul>
&lt;li>Prepare the application.&lt;/li>
&lt;/ul>
&lt;p>First, let&amp;rsquo;s create the application directory and the Dockerfile.&lt;/p>
&lt;p>Note that we use the Dockerfile arguments &lt;code>image_from_name&lt;/code> and &lt;code>image_from_tag&lt;/code>, which are automatically generated by Stevedore to provide information about the parent image. Additionally, any arguments defined in the &lt;code>vars&lt;/code> or &lt;code>persistent_vars&lt;/code> attributes of the image definition can be used in the Dockerfile when building the image.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>/ $ mkdir -p /apps/my-app
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>/ $ &lt;span style="color:#204a87">cd&lt;/span> /apps/my-app
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>/apps/my-app $ cat &lt;span style="color:#4e9a06">&amp;lt;&amp;lt; EOF &amp;gt; Dockerfile
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">ARG image_from_name
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">ARG image_from_tag
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">FROM \${image_from_name}:\${image_from_tag}
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">CMD [&amp;#34;echo&amp;#34;,&amp;#34;Hey there!&amp;#34;]
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">EOF&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Define a builder.&lt;/li>
&lt;/ul>
&lt;p>Next, we need to define the builder for our application. Take into account that to build all the versions in a standardized way we define a single builder, which uses the same Dockerfile.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>/ $ &lt;span style="color:#204a87">cd&lt;/span> /docker/builders
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>/docker/builders $ cat &lt;span style="color:#4e9a06">&amp;lt;&amp;lt; EOF &amp;gt; apps.yaml
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">builders:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> my-app:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> driver: docker
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> options:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> context:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> - path: /apps/my-app
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">EOF&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>To confirm that the builder is already available, use the following command:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>/ $ &lt;span style="color:#204a87">cd&lt;/span> /docker
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>/docker $ stevedore get builders
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>NAME DRIVER
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>my-apps docker
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Define the foundational images, the parent images.&lt;/li>
&lt;/ul>
&lt;p>Before creating the image definitions for our application, we define the base images that will serve as a starting point for building the Docker images.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>/ $ &lt;span style="color:#204a87">cd&lt;/span> /docker/images
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>/docker/images $ cat &lt;span style="color:#4e9a06">&amp;lt;&amp;lt; EOF &amp;gt; foundational.yaml
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">images:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> busybox:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> &amp;#34;1.36&amp;#34;:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> persistent_labels:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> created_at: &amp;#34;{{ .DateRFC3339Nano }}&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> &amp;#34;1.35&amp;#34;:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> persistent_labels:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> created_at: &amp;#34;{{ .DateRFC3339Nano }}&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">EOF&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>The &lt;code>persistent_labels&lt;/code> attribute sets in key-value pairs the labels to add on all images built from the parent image. Currently, the &lt;code>created_at&lt;/code> label sets the current date and time in RFC3339Nano format.&lt;/p>
&lt;div class="pageinfo pageinfo-secondary">
&lt;p>Stevedore uses Go&amp;rsquo;s &lt;a href="https://pkg.go.dev/text/template">text/template&lt;/a> package to render the image definitions.&lt;/p>
&lt;/div>
&lt;ul>
&lt;li>Specify the image definitions for the application.&lt;/li>
&lt;/ul>
&lt;p>In this step, we define two versions of the application &lt;code>my-app&lt;/code> in the &lt;code>applications.yaml&lt;/code> file, version &lt;code>2.1.0&lt;/code> and &lt;code>3.2.1&lt;/code>.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>/docker/images $ cat &lt;span style="color:#4e9a06">&amp;lt;&amp;lt; EOF &amp;gt; applications.yaml
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">images:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> my-app:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> &amp;#34;2.1.0&amp;#34;:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> name: &amp;#34;{{ .Name }}&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> version: &amp;#34;{{ .Version }}-{{ .Parent.Name }}{{ .Parent.Version }}&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> registry: registry.stevedore.test
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> builder: my-app
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> parents:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> busybox:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> - &amp;#34;1.35&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> &amp;#34;3.2.1&amp;#34;:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> name: &amp;#34;{{ .Name }}&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> version: &amp;#34;{{ .Version }}-{{ .Parent.Name }}{{ .Parent.Version }}&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> registry: registry.stevedore.test
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> builder: my-app
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> parents:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> busybox:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> - &amp;#34;1.35&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> - &amp;#34;1.36&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">EOF&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>The &lt;em>name&lt;/em> is set to &lt;code>{{ .Name }}&lt;/code> which will be replaced by the actual name of the image. The &lt;em>version&lt;/em> is set to &lt;code>{{ .Version }}-{{ .Parent.Name }}{{ .Parent.Version }}&lt;/code> which will be replaced by the actual version of the image and its parent name and version. The &lt;em>builder&lt;/em> is set to &lt;code>my-app&lt;/code>, which is the &lt;em>global-builder&lt;/em> previously defined in the &lt;code>/docker/builders/apps.yaml&lt;/code> file. The &lt;em>parents&lt;/em> are set to &lt;code>busybox:1.35&lt;/code> for &lt;code>2.1.0&lt;/code> version, &lt;code>busybox:1.35&lt;/code> and &lt;code>busybox:1.36&lt;/code> for the &lt;code>3.2.1&lt;/code> version.&lt;/p>
&lt;p>You can use the following command to ensure that images are already defined.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>/ $ &lt;span style="color:#204a87">cd&lt;/span> /docker
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>/docker $ stevedore get images --tree
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>├─── busybox:1.35
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>│ ├─── registry.stevedore.test/my-app:3.2.1-busybox1.35
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>│ ├─── registry.stevedore.test/my-app:2.1.0-busybox1.35
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>├─── busybox:1.36
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>│ ├─── registry.stevedore.test/my-app:3.2.1-busybox1.36
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Build the Docker images.&lt;/li>
&lt;/ul>
&lt;p>Create all the Docker images for our application at the same time, with just one command.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>/docker $ stevedore build my-app
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.35 Step 1/7 : ARG image_from_name
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.35 Step 2/7 : ARG image_from_tag
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.35 Step 3/7 : FROM &lt;span style="color:#4e9a06">${&lt;/span>&lt;span style="color:#000">image_from_name&lt;/span>&lt;span style="color:#4e9a06">}&lt;/span>:&lt;span style="color:#4e9a06">${&lt;/span>&lt;span style="color:#000">image_from_tag&lt;/span>&lt;span style="color:#4e9a06">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.36 Step 1/7 : ARG image_from_name
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.36 Step 2/7 : ARG image_from_tag
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.36 Step 3/7 : FROM &lt;span style="color:#4e9a06">${&lt;/span>&lt;span style="color:#000">image_from_name&lt;/span>&lt;span style="color:#4e9a06">}&lt;/span>:&lt;span style="color:#4e9a06">${&lt;/span>&lt;span style="color:#000">image_from_tag&lt;/span>&lt;span style="color:#4e9a06">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:2.1.0-busybox1.35 Step 1/7 : ARG image_from_name
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:2.1.0-busybox1.35 Step 2/7 : ARG image_from_tag
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:2.1.0-busybox1.35 Step 3/7 : FROM &lt;span style="color:#4e9a06">${&lt;/span>&lt;span style="color:#000">image_from_name&lt;/span>&lt;span style="color:#4e9a06">}&lt;/span>:&lt;span style="color:#4e9a06">${&lt;/span>&lt;span style="color:#000">image_from_tag&lt;/span>&lt;span style="color:#4e9a06">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.36 ‣ 1.36: Pulling from library/busybox
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.36 ‣ 205dae5015e7: Pull &lt;span style="color:#204a87">complete&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.36 ‣ Digest: sha256:7b3ccabffc97de872a30dfd234fd972a66d247c8cfc69b0550f276481852627c
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.36 ‣ Status: Downloaded newer image &lt;span style="color:#204a87;font-weight:bold">for&lt;/span> busybox:1.36
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.36 ---&amp;gt; 66ba00ad3de8
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.36 Step 4/7 : ARG &lt;span style="color:#000">message&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>my-app!
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.36 ---&amp;gt; Running in 7abead2499e1
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.36 ---&amp;gt; 5f0e093a1a94
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:2.1.0-busybox1.35 ‣ 1.35: Pulling from library/busybox
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.35 ‣ 1.35: Pulling from library/busybox
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:2.1.0-busybox1.35 ‣ 2461e8255644: Pull &lt;span style="color:#204a87">complete&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.35 ‣ 2461e8255644: Pull &lt;span style="color:#204a87">complete&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.35 ‣ Digest: sha256:f4ed5f2163110c26d42741fdc92bd1710e118aed4edb19212548e8ca4e5fca22
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.35 ‣ Status: Downloaded newer image &lt;span style="color:#204a87;font-weight:bold">for&lt;/span> busybox:1.35
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.35 ---&amp;gt; f68fa78323e7
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.35 Step 4/7 : ARG &lt;span style="color:#000">message&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>my-app!
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:2.1.0-busybox1.35 ‣ Digest: sha256:f4ed5f2163110c26d42741fdc92bd1710e118aed4edb19212548e8ca4e5fca22
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:2.1.0-busybox1.35 ‣ Status: Image is up to date &lt;span style="color:#204a87;font-weight:bold">for&lt;/span> busybox:1.35
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:2.1.0-busybox1.35 ---&amp;gt; f68fa78323e7
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:2.1.0-busybox1.35 Step 4/7 : ARG &lt;span style="color:#000">message&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>my-app!
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:2.1.0-busybox1.35 ---&amp;gt; Running in 72d2a3a19bd5
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.35 ---&amp;gt; Running in d317a4adc9a3
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:2.1.0-busybox1.35 ---&amp;gt; 0116092ba9da
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:2.1.0-busybox1.35 Step 5/7 : RUN &lt;span style="color:#204a87">echo&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;Hey there! Welcome to &lt;/span>&lt;span style="color:#4e9a06">${&lt;/span>&lt;span style="color:#000">message&lt;/span>&lt;span style="color:#4e9a06">}&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;&lt;/span> &amp;gt; /message.txt
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.35 ---&amp;gt; 03bf5a7e8561
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.35 Step 5/7 : RUN &lt;span style="color:#204a87">echo&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;Hey there! Welcome to &lt;/span>&lt;span style="color:#4e9a06">${&lt;/span>&lt;span style="color:#000">message&lt;/span>&lt;span style="color:#4e9a06">}&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;&lt;/span> &amp;gt; /message.txt
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:2.1.0-busybox1.35 ---&amp;gt; Running in a4c2d4b4ccb4
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.35 ---&amp;gt; Running in 41aacd4c92a7
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.36 ---&amp;gt; 5de239d250df
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.36 Step 6/7 : CMD &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;cat&amp;#34;&lt;/span>,&lt;span style="color:#4e9a06">&amp;#34;/message.txt&amp;#34;&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.36 ---&amp;gt; Running in 0c32a6be979e
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.36 ---&amp;gt; e50f09eee688
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.36 Step 7/7 : LABEL &lt;span style="color:#000">created_at&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>2023-02-03T22:42:55.122127826Z
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.36 ---&amp;gt; Running in 4068fc05135e
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.36 ---&amp;gt; d56ea6314840
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.36 ‣ sha256:d56ea631484054906c3daa8289b064b91725714ddcda4e3874d1e0a7b6561c49
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.36 Successfully built d56ea6314840
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.36 Successfully tagged registry.stevedore.test/my-app:3.2.1-busybox1.36
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:2.1.0-busybox1.35 ---&amp;gt; 75869c3433a5
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:2.1.0-busybox1.35 Step 6/7 : CMD &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;cat&amp;#34;&lt;/span>,&lt;span style="color:#4e9a06">&amp;#34;/message.txt&amp;#34;&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:2.1.0-busybox1.35 ---&amp;gt; Running in 761056fa55b5
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:2.1.0-busybox1.35 ---&amp;gt; 3e4e261bed5a
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:2.1.0-busybox1.35 Step 7/7 : LABEL &lt;span style="color:#000">created_at&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>2023-02-03T22:42:55.121439497Z
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:2.1.0-busybox1.35 ---&amp;gt; Running in f03539b96af7
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:2.1.0-busybox1.35 ---&amp;gt; 2e362f2c8f26
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:2.1.0-busybox1.35 ‣ sha256:2e362f2c8f265633aec978d68ab5dc1e57efbf27cc2fe442dd8b88c4d82e6582
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:2.1.0-busybox1.35 Successfully built 2e362f2c8f26
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:2.1.0-busybox1.35 Successfully tagged registry.stevedore.test/my-app:2.1.0-busybox1.35
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.35 ---&amp;gt; 0fa400361b6b
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.35 Step 6/7 : CMD &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;cat&amp;#34;&lt;/span>,&lt;span style="color:#4e9a06">&amp;#34;/message.txt&amp;#34;&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.35 ---&amp;gt; Running in 1ff331631429
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.35 ---&amp;gt; 778d69df86fa
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.35 Step 7/7 : LABEL &lt;span style="color:#000">created_at&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>2023-02-03T22:42:55.121439497Z
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.35 ---&amp;gt; Running in 07ed3cc21395
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.35 ---&amp;gt; 612c3f025134
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.35 ‣ sha256:612c3f02513437418e3bd10f784af44efe09b36583b3c1b9ba54138d3158f1f4
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.35 Successfully built 612c3f025134
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.35 Successfully tagged registry.stevedore.test/my-app:3.2.1-busybox1.35
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Validate the recently created images.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>/docker $ docker images
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>REPOSITORY TAG IMAGE ID CREATED SIZE
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app 3.2.1-busybox1.35 612c3f025134 &lt;span style="color:#0000cf;font-weight:bold">2&lt;/span> minutes ago 4.86MB
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app 3.2.1-busybox1.36 d56ea6314840 &lt;span style="color:#0000cf;font-weight:bold">2&lt;/span> minutes ago 4.87MB
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app 2.1.0-busybox1.35 2e362f2c8f26 &lt;span style="color:#0000cf;font-weight:bold">2&lt;/span> minutes ago 4.86MB
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>busybox 1.36 66ba00ad3de8 &lt;span style="color:#0000cf;font-weight:bold">4&lt;/span> weeks ago 4.87MB
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>busybox 1.35 f68fa78323e7 &lt;span style="color:#0000cf;font-weight:bold">6&lt;/span> weeks ago 4.86MB
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="promote-the-images-to-a-docker-registry">Promote the images to a Docker registry&lt;/h2>
&lt;p>Now that we already have the images created, and since we did not set the push after the build flag, we promote the images to the Docker registry and push them to the &lt;code>stable&lt;/code> namespace.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>/docker $ stevedore promote registry.stevedore.test/my-app:3.2.1-busybox1.36 --promote-image-registry-namespace stable
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.36 ‣ The push refers to repository &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>registry.stevedore.test/stable/my-app&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.36 ‣ b64792c17e4a: Pushed
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.36 ‣ 3.2.1-busybox1.36: digest: sha256:b1aa5de2f4bf9c031a2047a87fb5c556d0d436123316cad81078462648e58d4b size: &lt;span style="color:#0000cf;font-weight:bold">528&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Docs: Quickstart</title><link>https://gostevedore.github.io/docs/getting-started/quickstart/</link><pubDate>Thu, 05 Jan 2017 00:00:00 +0000</pubDate><guid>https://gostevedore.github.io/docs/getting-started/quickstart/</guid><description>
&lt;h2 id="installation">Installation&lt;/h2>
&lt;p>To install Stevedore, use the script provided on the repository:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>curl -fsSL https://raw.githubusercontent.com/gostevedore/stevedore/main/scripts/install.sh &lt;span style="color:#000;font-weight:bold">|&lt;/span> sudo bash -
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Alternatively, you can visit the &lt;a href="https://gostevedore.github.io/docs/getting-started/install/">installation guide&lt;/a> for other methods.&lt;/p>
&lt;h2 id="initial-setup">Initial setup&lt;/h2>
&lt;ul>
&lt;li>Create a folder structure to store image definitions and builder configurations before building Docker images.&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>/ $ mkdir -p /docker/images /docker/builders
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Initialize Stevedore.&lt;/li>
&lt;/ul>
&lt;p>We create a configuration file for this guide, but it can be also defined on environment variables.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>/ $ &lt;span style="color:#204a87">cd&lt;/span> /docker
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>/docker $ stevedore initialize --builders-path builders --credentials-storage-type &lt;span style="color:#204a87">local&lt;/span> --generate-credentials-encryption-key --images-path images --log-path-file /dev/null
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>After running this command, you can validate the configuration by using the &lt;em>get configuration&lt;/em> subcommand.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>/docker $ stevedore get configuration
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> builders_path: builders
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> concurrency: &lt;span style="color:#0000cf;font-weight:bold">4&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> semantic_version_tags_enabled: &lt;span style="color:#204a87">false&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> images_path: images
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> log_path: /dev/null
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> push_images: &lt;span style="color:#204a87">false&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> semantic_version_tags_templates:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ce5c00;font-weight:bold">{{&lt;/span> .Major &lt;span style="color:#ce5c00;font-weight:bold">}}&lt;/span>.&lt;span style="color:#ce5c00;font-weight:bold">{{&lt;/span> .Minor &lt;span style="color:#ce5c00;font-weight:bold">}}&lt;/span>.&lt;span style="color:#ce5c00;font-weight:bold">{{&lt;/span> .Patch &lt;span style="color:#ce5c00;font-weight:bold">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> credentials:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> storage_type: &lt;span style="color:#204a87">local&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> format: json
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> encryption_key: 1c591ac2d9c2664db265704052c17a67
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Create credentials to log into the Docker registry.&lt;/li>
&lt;/ul>
&lt;p>Since you create a credential using a username and password, Stevedore prompts you to enter a password for the specified username.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>/docker $ stevedore create credentials registry.stevedore.test --username admin
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Password:
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Validate that the credentials have been stored.&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>/docker $ stevedore get credentials
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ID TYPE CREDENTIALS
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test username-password &lt;span style="color:#000">username&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>admin
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Stevedore&amp;rsquo;s configuration encrypts the credentials content at rest by providing an encryption key.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>/docker $ cat credentials/82e99d42ee1191bb42fbfb444920104d
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>2d067af765e8de39fd76b5cd1a430768a66464208bf8fe0c092bcb146a24feed377b916952494e6cea55187f397aee8c2d90a55ef9882cf85ee97ed5660700afa002767e028b4ea6bde274a524e7100f5729601f2d44caa08a1a102af7f79079723f35953133be56e31d0eaf44f52255a5c94512c74625dca3f00b77f9031d4f48f5cf38293f7a2a90f727c9a5eedf57e001ea8766a6d1e47d20354ad3ca6cf022ee70b97b3598e7377355a7b52f62fab8b6628b230c33cf0234ea1208c0d6ecef65e8e1206e7daf15acbbfb62d77650982c9f487129534b367a7fc2b519fd04538bffe87e57184adabc57e613be4b0e106480f9078c8c1c916b65de0039a3adc6cea70b962c0d93477e114e25a2a160db0218e9312d0df00d9b1044e0b4981982834094a36d8d9e4fd9ed766605c1a0b43ff11219d6e5bebb414e084102ce8cd57e86a658455de5fff927ba9be039be4afd393b7e8137cdefb268ed7c79ff37a60c1be3693372d7890b9f8f7c81fa559719ff83371e080efaee86b239e127a094136d056641a4a58245f71414b53dd96214149c6f54de055064163fa9dcb0a6b274d9269a49e1e4f76a9c0a89ec12d40c577ea1b5c1b3f9f8454f5473518c58e8c139a96335850a6415df7e2d41f5ab383f85d30281fd29493db0f0fb577aba35326cd5063b463a41161888514dbce09ccea5887494733256d74341e2623a5328c656/docker &lt;span style="color:#8f5902;font-style:italic">#&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="build-the-docker-images-for-an-application">Build the Docker images for an application&lt;/h2>
&lt;p>In this section, we create an application that has multiple versions and needs to be built from multiple parents.&lt;/p>
&lt;ul>
&lt;li>Prepare the application.&lt;/li>
&lt;/ul>
&lt;p>First, let&amp;rsquo;s create the application directory and the Dockerfile.&lt;/p>
&lt;p>Note that we use the Dockerfile arguments &lt;code>image_from_name&lt;/code> and &lt;code>image_from_tag&lt;/code>, which are automatically generated by Stevedore to provide information about the parent image. Additionally, any arguments defined in the &lt;code>vars&lt;/code> or &lt;code>persistent_vars&lt;/code> attributes of the image definition can be used in the Dockerfile when building the image.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>/ $ mkdir -p /apps/my-app
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>/ $ &lt;span style="color:#204a87">cd&lt;/span> /apps/my-app
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>/apps/my-app $ cat &lt;span style="color:#4e9a06">&amp;lt;&amp;lt; EOF &amp;gt; Dockerfile
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">ARG image_from_name
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">ARG image_from_tag
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">FROM \${image_from_name}:\${image_from_tag}
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">CMD [&amp;#34;echo&amp;#34;,&amp;#34;Hey there!&amp;#34;]
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">EOF&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Define a builder.&lt;/li>
&lt;/ul>
&lt;p>Next, we need to define the builder for our application. Take into account that to build all the versions in a standardized way we define a single builder, which uses the same Dockerfile.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>/ $ &lt;span style="color:#204a87">cd&lt;/span> /docker/builders
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>/docker/builders $ cat &lt;span style="color:#4e9a06">&amp;lt;&amp;lt; EOF &amp;gt; apps.yaml
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">builders:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> my-app:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> driver: docker
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> options:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> context:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> - path: /apps/my-app
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">EOF&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>To confirm that the builder is already available, use the following command:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>/ $ &lt;span style="color:#204a87">cd&lt;/span> /docker
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>/docker $ stevedore get builders
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>NAME DRIVER
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>my-apps docker
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Define the foundational images, the parent images.&lt;/li>
&lt;/ul>
&lt;p>Before creating the image definitions for our application, we define the base images that will serve as a starting point for building the Docker images.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>/ $ &lt;span style="color:#204a87">cd&lt;/span> /docker/images
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>/docker/images $ cat &lt;span style="color:#4e9a06">&amp;lt;&amp;lt; EOF &amp;gt; foundational.yaml
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">images:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> busybox:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> &amp;#34;1.36&amp;#34;:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> persistent_labels:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> created_at: &amp;#34;{{ .DateRFC3339Nano }}&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> &amp;#34;1.35&amp;#34;:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> persistent_labels:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> created_at: &amp;#34;{{ .DateRFC3339Nano }}&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">EOF&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>The &lt;code>persistent_labels&lt;/code> attribute sets in key-value pairs the labels to add on all images built from the parent image. Currently, the &lt;code>created_at&lt;/code> label sets the current date and time in RFC3339Nano format.&lt;/p>
&lt;div class="pageinfo pageinfo-secondary">
&lt;p>Stevedore uses Go&amp;rsquo;s &lt;a href="https://pkg.go.dev/text/template">text/template&lt;/a> package to render the image definitions.&lt;/p>
&lt;/div>
&lt;ul>
&lt;li>Specify the images definitions for the application.&lt;/li>
&lt;/ul>
&lt;p>In this step, we define two versions of the application &lt;code>my-app&lt;/code> in the &lt;code>applications.yaml&lt;/code> file, version &lt;code>2.1.0&lt;/code> and &lt;code>3.2.1&lt;/code>.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>/docker/images $ cat &lt;span style="color:#4e9a06">&amp;lt;&amp;lt; EOF &amp;gt; applications.yaml
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">images:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> my-app:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> &amp;#34;2.1.0&amp;#34;:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> name: &amp;#34;{{ .Name }}&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> version: &amp;#34;{{ .Version }}-{{ .Parent.Name }}{{ .Parent.Version }}&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> registry: registry.stevedore.test
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> builder: my-app
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> parents:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> busybox:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> - &amp;#34;1.35&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> &amp;#34;3.2.1&amp;#34;:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> name: &amp;#34;{{ .Name }}&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> version: &amp;#34;{{ .Version }}-{{ .Parent.Name }}{{ .Parent.Version }}&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> registry: registry.stevedore.test
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> builder: my-app
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> parents:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> busybox:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> - &amp;#34;1.35&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> - &amp;#34;1.36&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06">EOF&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>The &lt;em>name&lt;/em> is set to &lt;code>{{ .Name }}&lt;/code> which will be replaced by the actual name of the image. The &lt;em>version&lt;/em> is set to &lt;code>{{ .Version }}-{{ .Parent.Name }}{{ .Parent.Version }}&lt;/code> which will be replaced by the actual version of the image and its parent name and version. The &lt;em>builder&lt;/em> is set to &lt;code>my-app&lt;/code>, which is the &lt;em>global-builder&lt;/em> previously defined in the &lt;code>/docker/builders/apps.yaml&lt;/code> file. The &lt;em>parents&lt;/em> are set to &lt;code>busybox:1.35&lt;/code> for &lt;code>2.1.0&lt;/code> version, &lt;code>busybox:1.35&lt;/code> and &lt;code>busybox:1.36&lt;/code> for the &lt;code>3.2.1&lt;/code> version.&lt;/p>
&lt;p>You can use the following command to ensure that images are already defined.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>/ $ &lt;span style="color:#204a87">cd&lt;/span> /docker
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>/docker $ stevedore get images --tree
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>├─── busybox:1.35
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>│ ├─── registry.stevedore.test/my-app:3.2.1-busybox1.35
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>│ ├─── registry.stevedore.test/my-app:2.1.0-busybox1.35
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>├─── busybox:1.36
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>│ ├─── registry.stevedore.test/my-app:3.2.1-busybox1.36
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Build the Docker images.&lt;/li>
&lt;/ul>
&lt;p>Create all the Docker images for our application at the same time, with just one command.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>/docker $ stevedore build my-app
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.35 Step 1/7 : ARG image_from_name
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.35 Step 2/7 : ARG image_from_tag
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.35 Step 3/7 : FROM &lt;span style="color:#4e9a06">${&lt;/span>&lt;span style="color:#000">image_from_name&lt;/span>&lt;span style="color:#4e9a06">}&lt;/span>:&lt;span style="color:#4e9a06">${&lt;/span>&lt;span style="color:#000">image_from_tag&lt;/span>&lt;span style="color:#4e9a06">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.36 Step 1/7 : ARG image_from_name
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.36 Step 2/7 : ARG image_from_tag
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.36 Step 3/7 : FROM &lt;span style="color:#4e9a06">${&lt;/span>&lt;span style="color:#000">image_from_name&lt;/span>&lt;span style="color:#4e9a06">}&lt;/span>:&lt;span style="color:#4e9a06">${&lt;/span>&lt;span style="color:#000">image_from_tag&lt;/span>&lt;span style="color:#4e9a06">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:2.1.0-busybox1.35 Step 1/7 : ARG image_from_name
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:2.1.0-busybox1.35 Step 2/7 : ARG image_from_tag
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:2.1.0-busybox1.35 Step 3/7 : FROM &lt;span style="color:#4e9a06">${&lt;/span>&lt;span style="color:#000">image_from_name&lt;/span>&lt;span style="color:#4e9a06">}&lt;/span>:&lt;span style="color:#4e9a06">${&lt;/span>&lt;span style="color:#000">image_from_tag&lt;/span>&lt;span style="color:#4e9a06">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.36 ‣ 1.36: Pulling from library/busybox
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.36 ‣ 205dae5015e7: Pull &lt;span style="color:#204a87">complete&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.36 ‣ Digest: sha256:7b3ccabffc97de872a30dfd234fd972a66d247c8cfc69b0550f276481852627c
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.36 ‣ Status: Downloaded newer image &lt;span style="color:#204a87;font-weight:bold">for&lt;/span> busybox:1.36
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.36 ---&amp;gt; 66ba00ad3de8
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.36 Step 4/7 : ARG &lt;span style="color:#000">message&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>my-app!
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.36 ---&amp;gt; Running in 7abead2499e1
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.36 ---&amp;gt; 5f0e093a1a94
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:2.1.0-busybox1.35 ‣ 1.35: Pulling from library/busybox
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.35 ‣ 1.35: Pulling from library/busybox
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:2.1.0-busybox1.35 ‣ 2461e8255644: Pull &lt;span style="color:#204a87">complete&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.35 ‣ 2461e8255644: Pull &lt;span style="color:#204a87">complete&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.35 ‣ Digest: sha256:f4ed5f2163110c26d42741fdc92bd1710e118aed4edb19212548e8ca4e5fca22
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.35 ‣ Status: Downloaded newer image &lt;span style="color:#204a87;font-weight:bold">for&lt;/span> busybox:1.35
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.35 ---&amp;gt; f68fa78323e7
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.35 Step 4/7 : ARG &lt;span style="color:#000">message&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>my-app!
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:2.1.0-busybox1.35 ‣ Digest: sha256:f4ed5f2163110c26d42741fdc92bd1710e118aed4edb19212548e8ca4e5fca22
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:2.1.0-busybox1.35 ‣ Status: Image is up to date &lt;span style="color:#204a87;font-weight:bold">for&lt;/span> busybox:1.35
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:2.1.0-busybox1.35 ---&amp;gt; f68fa78323e7
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:2.1.0-busybox1.35 Step 4/7 : ARG &lt;span style="color:#000">message&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>my-app!
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:2.1.0-busybox1.35 ---&amp;gt; Running in 72d2a3a19bd5
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.35 ---&amp;gt; Running in d317a4adc9a3
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:2.1.0-busybox1.35 ---&amp;gt; 0116092ba9da
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:2.1.0-busybox1.35 Step 5/7 : RUN &lt;span style="color:#204a87">echo&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;Hey there! Welcome to &lt;/span>&lt;span style="color:#4e9a06">${&lt;/span>&lt;span style="color:#000">message&lt;/span>&lt;span style="color:#4e9a06">}&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;&lt;/span> &amp;gt; /message.txt
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.35 ---&amp;gt; 03bf5a7e8561
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.35 Step 5/7 : RUN &lt;span style="color:#204a87">echo&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;Hey there! Welcome to &lt;/span>&lt;span style="color:#4e9a06">${&lt;/span>&lt;span style="color:#000">message&lt;/span>&lt;span style="color:#4e9a06">}&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;&lt;/span> &amp;gt; /message.txt
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:2.1.0-busybox1.35 ---&amp;gt; Running in a4c2d4b4ccb4
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.35 ---&amp;gt; Running in 41aacd4c92a7
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.36 ---&amp;gt; 5de239d250df
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.36 Step 6/7 : CMD &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;cat&amp;#34;&lt;/span>,&lt;span style="color:#4e9a06">&amp;#34;/message.txt&amp;#34;&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.36 ---&amp;gt; Running in 0c32a6be979e
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.36 ---&amp;gt; e50f09eee688
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.36 Step 7/7 : LABEL &lt;span style="color:#000">created_at&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>2023-02-03T22:42:55.122127826Z
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.36 ---&amp;gt; Running in 4068fc05135e
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.36 ---&amp;gt; d56ea6314840
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.36 ‣ sha256:d56ea631484054906c3daa8289b064b91725714ddcda4e3874d1e0a7b6561c49
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.36 Successfully built d56ea6314840
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.36 Successfully tagged registry.stevedore.test/my-app:3.2.1-busybox1.36
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:2.1.0-busybox1.35 ---&amp;gt; 75869c3433a5
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:2.1.0-busybox1.35 Step 6/7 : CMD &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;cat&amp;#34;&lt;/span>,&lt;span style="color:#4e9a06">&amp;#34;/message.txt&amp;#34;&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:2.1.0-busybox1.35 ---&amp;gt; Running in 761056fa55b5
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:2.1.0-busybox1.35 ---&amp;gt; 3e4e261bed5a
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:2.1.0-busybox1.35 Step 7/7 : LABEL &lt;span style="color:#000">created_at&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>2023-02-03T22:42:55.121439497Z
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:2.1.0-busybox1.35 ---&amp;gt; Running in f03539b96af7
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:2.1.0-busybox1.35 ---&amp;gt; 2e362f2c8f26
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:2.1.0-busybox1.35 ‣ sha256:2e362f2c8f265633aec978d68ab5dc1e57efbf27cc2fe442dd8b88c4d82e6582
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:2.1.0-busybox1.35 Successfully built 2e362f2c8f26
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:2.1.0-busybox1.35 Successfully tagged registry.stevedore.test/my-app:2.1.0-busybox1.35
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.35 ---&amp;gt; 0fa400361b6b
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.35 Step 6/7 : CMD &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;cat&amp;#34;&lt;/span>,&lt;span style="color:#4e9a06">&amp;#34;/message.txt&amp;#34;&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.35 ---&amp;gt; Running in 1ff331631429
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.35 ---&amp;gt; 778d69df86fa
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.35 Step 7/7 : LABEL &lt;span style="color:#000">created_at&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>2023-02-03T22:42:55.121439497Z
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.35 ---&amp;gt; Running in 07ed3cc21395
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.35 ---&amp;gt; 612c3f025134
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.35 ‣ sha256:612c3f02513437418e3bd10f784af44efe09b36583b3c1b9ba54138d3158f1f4
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.35 Successfully built 612c3f025134
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.35 Successfully tagged registry.stevedore.test/my-app:3.2.1-busybox1.35
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Validate the recently created images.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>/docker $ docker images
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>REPOSITORY TAG IMAGE ID CREATED SIZE
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app 3.2.1-busybox1.35 612c3f025134 &lt;span style="color:#0000cf;font-weight:bold">2&lt;/span> minutes ago 4.86MB
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app 3.2.1-busybox1.36 d56ea6314840 &lt;span style="color:#0000cf;font-weight:bold">2&lt;/span> minutes ago 4.87MB
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app 2.1.0-busybox1.35 2e362f2c8f26 &lt;span style="color:#0000cf;font-weight:bold">2&lt;/span> minutes ago 4.86MB
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>busybox 1.36 66ba00ad3de8 &lt;span style="color:#0000cf;font-weight:bold">4&lt;/span> weeks ago 4.87MB
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>busybox 1.35 f68fa78323e7 &lt;span style="color:#0000cf;font-weight:bold">6&lt;/span> weeks ago 4.86MB
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="promote-the-images-to-a-docker-registry">Promote the images to a Docker registry&lt;/h2>
&lt;p>Now that we already have the images created, and since we did not set the push after the build flag, we promote the images to the Docker registry and push them to the &lt;code>stable&lt;/code> namespace.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>/docker $ stevedore promote registry.stevedore.test/my-app:3.2.1-busybox1.36 --promote-image-registry-namespace stable
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.36 ‣ The push refers to repository &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>registry.stevedore.test/stable/my-app&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.36 ‣ b64792c17e4a: Pushed
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>registry.stevedore.test/my-app:3.2.1-busybox1.36 ‣ 3.2.1-busybox1.36: digest: sha256:b1aa5de2f4bf9c031a2047a87fb5c556d0d436123316cad81078462648e58d4b size: &lt;span style="color:#0000cf;font-weight:bold">528&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item></channel></rss>